(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{153:function(e,t,a){},154:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(1),s=a(57),c=a.n(s),i=(a(65),a(3)),o=a.n(i),l=a(10),u=a(4),d=a(5),h=a(7),j=a(6),m=a(9),p=a(22),b=a(8);a(67);function f(){return Object(r.jsxs)("div",{className:"bouncing-loader",children:[Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{})]})}var v=a(26),g=a.n(v),x=a(2);function O(e){return Object(r.jsx)("ul",{className:"tag-list",children:e.tagList.map((function(e,t){return Object(r.jsx)("li",{className:"tag-default tag-pill tag-outline",children:e},t)}))})}function N(e){var t=e.totalArticlesCount,a=e.articlePerPage,n=e.activePageIndex,s=e.handlePageClick;return Object(r.jsx)("ul",{className:"pagination",children:t?Object(p.a)(Array(Math.ceil(t/a))).map((function(e,t){return Object(r.jsx)("li",{onClick:function(){return s(t)},className:"page-item ng-scope page-link ng-binding pagination-btn ".concat(n===t?"active":""),children:t+1},t)})):""})}var y=a(21),C="/api/articles",k=C+"/feed",w="/api/users/login",S="/api/users",F="/api/user",T="/api/profiles",E="user_token";a(69);function L(){return Object(r.jsx)("div",{className:"donut"})}var P=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={comments:null,fetchRequestError:"",postRequestError:"",commentBody:"",isCreatingComment:!1},e.handleSubmit=function(t){t.preventDefault(),e.setState({isCreatingComment:!0});var a=e.props.slug,r={body:e.state.commentBody},n={method:"POST",headers:{"Content-Type":"application/json",authorization:localStorage.getItem(E)},body:JSON.stringify({comment:r})};fetch("".concat(C,"/").concat(a,"/comments"),n).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){var a=t.comment,r=Object(p.a)(e.state.comments);r.unshift(a),e.setState({comments:r,isCreatingComment:!1,commentBody:""})})).catch((function(t){e.setState({postRequestError:"Not able to create the comment",isCreatingComment:!1})}))},e.handleChange=function(t){var a=t.target,r=a.name,n=a.value;e.setState(Object(b.a)({},r,n))},e.handleDeleteComment=function(t){var a=e.props.slug,r={method:"DELETE",headers:{"Content-Type":"application/json",authorization:localStorage.getItem(E)}};fetch("".concat(C,"/").concat(a,"/comments/").concat(t),r).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(){var a=Object(p.a)(e.state.comments).filter((function(e){return e.id!==t}));e.setState({comments:a})})).catch((function(e){console.log(e)}))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.slug;fetch("".concat(C,"/").concat(t,"/comments"),{authorization:localStorage.getItem(E)}).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){e.setState({comments:t.comments})})).catch((function(t){e.setState({fetchRequestError:"Not able to fetch the comments"})}))}},{key:"render",value:function(){var e,t,a=this.state,n=a.comments,s=a.fetchRequestError,c=a.commentBody,i=a.isCreatingComment;return Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("div",{className:"col-xs-12 col-md-8 offset-md-2",children:[this.props.user?Object(r.jsxs)("form",{onSubmit:this.handleSubmit,className:"card comment-form",children:[Object(r.jsx)("div",{className:"card-block",children:Object(r.jsx)("textarea",{name:"commentBody",onChange:this.handleChange,value:c,className:"form-control",placeholder:"Write a comment...",rows:"3"})}),Object(r.jsxs)("div",{className:"card-footer",children:[Object(r.jsx)("img",{src:(null===(e=this.props)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.image)||"http://i.imgur.com/Xzm3mI0.jpg",className:"comment-author-img",alt:"current user avatar"}),Object(r.jsx)("button",{className:"btn btn-sm btn-primary",children:i?Object(r.jsx)(L,{}):"Post Comment"})]})]}):"",Object(r.jsx)(U,{comments:n,fetchRequestError:s,currentUser:this.props.user,handleDeleteComment:this.handleDeleteComment})]})})}}]),a}(n.Component);function U(e){var t;return e.fetchRequestError?Object(r.jsx)("p",{className:"article-preview",children:e.fetchRequestError}):e.comments?(null===(t=e.comments)||void 0===t?void 0:t.length)?e.comments.map((function(t){var a;return Object(r.jsxs)("div",{className:"card",children:[Object(r.jsx)("div",{className:"card-block",children:Object(r.jsx)("p",{className:"card-text",children:t.body})}),Object(r.jsxs)("div",{className:"card-footer",children:[Object(r.jsx)(x.b,{to:"/profiles/".concat(t.author.username),className:"comment-author",children:Object(r.jsx)("img",{src:(null===(a=t.author)||void 0===a?void 0:a.image)||"http://i.imgur.com/Xzm3mI0.jpg",alt:"avatar",className:"comment-author-img"})}),"\xa0",Object(r.jsx)(x.b,{to:"/profiles/".concat(t.author.username),className:"comment-author",children:t.author.username}),Object(r.jsx)("span",{className:"date-posted",children:g()(t.createdAt).format("dddd, MMMM Do YYYY")}),e.currentUser.username===t.author.username?Object(r.jsx)("div",{className:"mod-options",children:Object(r.jsx)("span",{onClick:function(){return e.handleDeleteComment(t.id)},className:"ion-trash-a",children:"\ud83d\uddd1"})}):""]})]},null===t||void 0===t?void 0:t.id)})):Object(r.jsx)("h5",{className:"article-preview",children:"No comments..."}):Object(r.jsx)(f,{})}var I=Object(m.f)(P),D=a(59),q=a.n(D),A=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={activeFeed:"profileFeed",profileUser:null},e.fetchData=function(){var t,a,r,n=e.props.match.params.username;n===(null===(t=e.props)||void 0===t||null===(a=t.user)||void 0===a?void 0:a.username)&&e.setState({profileUser:null===(r=e.props)||void 0===r?void 0:r.user,activeFeed:"personal"});fetch("".concat(T,"/").concat(n),{headers:{authorization:localStorage.getItem(E)}}).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(t){var a=t.profile;e.setState({profileUser:a})})).catch((function(){e.setState({error:"Not able to fetch the profile"})}))},e.handleFeedClick=function(t){e.setState({activeFeed:t})},e.handleFollowClick=function(t){z(t.username,t.following,e.updateFollowedState)},e.updateFollowedState=function(t){e.setState({profileUser:t})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){e.match.params.username!==this.props.match.params.username&&this.fetchData()}},{key:"render",value:function(){var e,t,a,n,s=this,c=this.state,i=c.activeFeed,o=c.profileUser;return o?Object(r.jsxs)("div",{className:"profile-page",children:[Object(r.jsx)("div",{className:"user-info",children:Object(r.jsx)("div",{className:"container",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("div",{className:"col-xs-12 col-md-10 offset-md-1",children:[Object(r.jsx)("img",{src:(null===o||void 0===o?void 0:o.image)||"http://i.imgur.com/Xzm3mI0.jpg",className:"user-img",alt:"avatar"}),Object(r.jsx)("h4",{children:null===o||void 0===o?void 0:o.username}),Object(r.jsx)("p",{children:null===o||void 0===o?void 0:o.bio}),o.username===(null===(e=this.props)||void 0===e||null===(t=e.user)||void 0===t?void 0:t.username)?Object(r.jsxs)(x.b,{to:"/settings",className:"btn btn-sm btn-outline-secondary action-btn",children:[Object(r.jsx)("span",{className:"ion-compose",children:"\u2699\ufe0f"}),"\xa0Edit Profile Settings"]}):Object(r.jsxs)("button",{onClick:function(){return s.handleFollowClick(o)},className:"btn btn-sm btn-outline-secondary action-btn ".concat(o.following?"active":""),children:[Object(r.jsx)("span",{className:"ion-plus-round",children:"\u2795\ufe0f"}),"\xa0 ",o.following?"Unfollow":"Follow"," ",o.username," "]})]})})})}),Object(r.jsx)("div",{className:"container",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("div",{className:"col-xs-12 col-md-10 offset-md-1",children:[Object(r.jsx)("div",{className:"articles-toggle",children:Object(r.jsxs)("ul",{className:"nav nav-pills outline-active",children:[o.username===(null===(a=this.props)||void 0===a||null===(n=a.user)||void 0===n?void 0:n.username)?Object(r.jsx)("li",{onClick:function(){return s.handleFeedClick("personal")},className:"nav-item nav-link ".concat("personal"===i?"active":""),children:"My Articles"}):Object(r.jsxs)("li",{onClick:function(){return s.handleFeedClick("profileFeed")},className:"nav-item nav-link ".concat("profileFeed"===i?"active":""),children:[o.username,"'s Articles"]}),Object(r.jsx)("li",{onClick:function(){return s.handleFeedClick("favorited")},className:"nav-item nav-link ".concat("favorited"===i?"active":""),children:"Favorited Articles"})]})}),Object(r.jsx)(G,{activeFeed:i,username:null===o||void 0===o?void 0:o.username})]})})})]}):Object(r.jsx)(f,{})}}]),a}(n.Component);function z(e,t,a){var r;r=t?{method:"DELETE",headers:{authorization:localStorage.getItem(E)}}:{method:"POST",headers:{authorization:localStorage.getItem(E)}},fetch("".concat(T,"/").concat(e,"/follow"),r).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){var t=e.profile;return a(t)})).catch((function(e){console.log(e)}))}var M=Object(m.f)(A),R=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={article:null,error:""},e.handleDeleteArticle=function(){var t=e.props.match.params.slug,a={method:"DELETE",headers:{"Content-Type":"application/json",authorization:localStorage.getItem(E)}};fetch("".concat(C,"/").concat(t),a).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(){return e.props.history.push("/")})).catch((function(e){console.log(e)}))},e.handleFavoriteClick=function(){var t=e.state.article;B(t.slug,t.favorited,e.updateFavoritedState)},e.handleFollowClick=function(t){z(t.username,t.following,e.updateFollowedState)},e.updateFavoritedState=function(t){e.setState({article:t})},e.updateFollowedState=function(t){var a=Object(y.a)({},e.state.article);a.author=t,e.setState({article:a})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.slug,a={method:"GET",headers:{"Content-Type":"application/json",authorization:localStorage.getItem(E)}};fetch("".concat(C,"/").concat(t),a).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(t){e.setState({article:t.article})})).catch((function(){e.setState({error:"Not able to fetch the article"})}))}},{key:"render",value:function(){var e=this.state,t=e.article,a=e.error,n=this.props.user;return a?Object(r.jsx)("center",{className:"article-preview",children:a}):t?Object(r.jsxs)("main",{className:"article-page",children:[Object(r.jsx)("section",{className:"banner",children:Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)("h1",{children:t.title}),Object(r.jsx)(Y,{user:n,article:t,handleDeleteArticle:this.handleDeleteArticle,handleFavoriteClick:this.handleFavoriteClick,handleFollowClick:this.handleFollowClick})]})}),Object(r.jsxs)("section",{className:"container page",children:[Object(r.jsx)("div",{className:"row article-content",children:Object(r.jsxs)("div",{className:"col-md-12",children:[Object(r.jsx)(q.a,{source:t.body}),Object(r.jsx)(O,{tagList:t.tagList})]})}),Object(r.jsx)("hr",{}),Object(r.jsx)("div",{className:"article-actions",children:Object(r.jsx)(Y,{user:n,article:t,handleDeleteArticle:this.handleDeleteArticle,handleFavoriteClick:this.handleFavoriteClick,handleFollowClick:this.handleFollowClick})}),Object(r.jsx)(I,{slug:t.slug,user:n})]})]}):Object(r.jsx)(f,{})}}]),a}(n.Component);function Y(e){var t,a=e.article,n=e.user;return Object(r.jsxs)("div",{className:"article-meta",children:[Object(r.jsx)(x.b,{to:"/profiles/".concat(a.author.username),children:Object(r.jsx)("img",{src:a.author.image||"http://i.imgur.com/Xzm3mI0.jpg",alt:"avatar"})}),Object(r.jsxs)("div",{className:"info",children:[Object(r.jsx)(x.b,{to:"/profiles/".concat(a.author.username),className:"author",children:a.author.username}),Object(r.jsx)("span",{className:"date",children:g()(null===a||void 0===a?void 0:a.createdAt).format("dddd, MMMM Do YYYY")})]}),a.author.username===(null===n||void 0===n?void 0:n.username)?Object(r.jsxs)(x.b,{to:"/editor/".concat(a.slug),className:"btn btn-outline-secondary btn-sm",children:[Object(r.jsx)("span",{children:"\u270f\ufe0f"}),"\xa0Edit Article"," "]}):Object(r.jsxs)("button",{onClick:function(){return e.handleFollowClick(a.author)},className:"btn btn-sm btn-outline-secondary ".concat(a.author.following?"active":""),children:[Object(r.jsx)("span",{className:"ion-plus-round",children:"\u2795\ufe0f"}),"\xa0 ",a.author.following?"Unfollow":"Follow"," ",a.author.username," "]}),"\xa0\xa0",(null===(t=a.author)||void 0===t?void 0:t.username)===(null===n||void 0===n?void 0:n.username)?Object(r.jsxs)("button",{onClick:e.handleDeleteArticle,className:"btn btn-outline-danger btn-sm",children:[Object(r.jsx)("span",{children:"\ud83d\uddd1"}),"\xa0 Delete Article"," "]}):Object(r.jsxs)("button",{onClick:e.handleFavoriteClick,className:"btn btn-sm btn-outline-primary ".concat(a.favorited?"active":""),children:[Object(r.jsx)("span",{className:"ion-heart",children:"\ud83d\udc9a"}),"\xa0 Favorite Article"," ",Object(r.jsxs)("span",{className:"counter",children:["(",a.favoritesCount,")"]})]})]})}function B(e,t,a){var r;r=t?{method:"DELETE",headers:{authorization:localStorage.getItem(E)}}:{method:"POST",headers:{authorization:localStorage.getItem(E)}},fetch("".concat(C,"/").concat(e,"/favorite"),r).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){var t=e.article;return a(t)})).catch((function(e){console.log(e)}))}var J=Object(m.f)(R),G=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={articleList:null,totalArticlesCount:null,activePageIndex:0,articlePerPage:10,error:""},e.updateData=function(t){var a=e.props,r=a.activeFeed,n=a.username,s=a.activeTag,c=e.state,i=c.activePageIndex,u=c.articlePerPage,d=C,h="articleList"===t?"limit=".concat(u,"&offset=").concat(u*i):"";s&&(h+="&tag=".concat(s)),"personal"===r?d=k:"favorited"===r?h+="&favorited=".concat(n):"profileFeed"===r&&(h+="&author=".concat(n));var j={method:"GET",headers:{"Content-Type":"application/json",authorization:localStorage.user_token?localStorage.getItem(E):""}};fetch("".concat(d,"?").concat(h),j).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(a){e.setState(Object(b.a)({},t,"articleList"===t?a.articles:a.articlesCount))})).catch((function(t){e.setState({error:"Not able to fetch articles"})}))},e.handlePageClick=function(t){e.setState({activePageIndex:t})},e.handleFavoriteClick=function(t){var a=e.state.articleList.find((function(e){return e.slug===t}));B(a.slug,a.favorited,e.updateFavoritedState)},e.updateFavoritedState=function(t){var a=Object(p.a)(e.state.articleList),r=a.find((function(e){return e.slug===t.slug}));r.favorited=t.favorited,r.favoritesCount=t.favoritesCount,e.setState({articleList:a})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.updateData("articleList"),this.updateData("totalArticlesCount")}},{key:"componentDidUpdate",value:function(e,t){var a=this;e.activeFeed===this.props.activeFeed&&t.activePageIndex===this.state.activePageIndex||this.setState((function(t){var r=t.activePageIndex;return{articleList:null,activePageIndex:e.activeFeed!==a.props.activeFeed?0:r}}),(function(){a.updateData("articleList"),a.updateData("totalArticlesCount")}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.articleList,n=t.totalArticlesCount,s=t.activePageIndex,c=t.articlePerPage,i=t.error;return i?Object(r.jsx)("p",{className:"article-preview",children:i}):a||i?(null===a||void 0===a?void 0:a.length)?Object(r.jsxs)(r.Fragment,{children:[a.map((function(t,a){return Object(r.jsxs)("div",{className:"article-preview",children:[Object(r.jsxs)("div",{className:"article-meta",children:[Object(r.jsx)("a",{href:"profile.html",children:Object(r.jsx)("img",{src:t.author.image||"http://i.imgur.com/Xzm3mI0.jpg",alt:"avatar"})}),Object(r.jsxs)("div",{className:"info",children:[Object(r.jsx)(x.b,{to:"/profiles/".concat(t.author.username),className:"author",children:t.author.username}),Object(r.jsx)("span",{className:"date",children:g()(t.createdAt).format("dddd, MMMM Do YYYY")})]}),Object(r.jsxs)("button",{onClick:function(){return e.handleFavoriteClick(t.slug)},className:"btn btn-outline-primary btn-sm pull-xs-right ".concat(t.favorited?"active":""),children:[Object(r.jsx)("span",{className:"ion-heart",children:"\ud83d\udc9a"})," ",t.favoritesCount]})]}),Object(r.jsxs)(x.b,{to:"articles/".concat(t.slug),className:"preview-link",children:[Object(r.jsx)("h1",{children:t.title}),Object(r.jsx)("p",{children:t.description}),Object(r.jsx)("span",{children:"Read more..."}),Object(r.jsx)(O,{tagList:t.tagList})]})]},a)})),Object(r.jsx)(N,{articlePerPage:c,activePageIndex:s,totalArticlesCount:n,handlePageClick:this.handlePageClick,error:i})]}):Object(r.jsx)("h3",{className:"article-preview",children:"No articles..."}):Object(r.jsx)(f,{})}}]),a}(n.Component),X=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={tagList:null,error:""},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/tags").then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){e.setState({tagList:t.tags})})).catch((function(t){e.setState({error:"Not able to fetch tags"})}))}},{key:"render",value:function(){var e=this.state,t=e.tagList,a=e.error,n=this.props,s=n.activeTag,c=n.handleTagClick;return a?Object(r.jsx)("p",{className:"",children:a}):t?(null===t||void 0===t?void 0:t.length)?Object(r.jsx)("ul",{className:"tag-list",children:t.map((function(e,t){return Object(r.jsx)("li",{onClick:function(){return c(e)},className:"tag-default tag-pill ".concat(s===e?"active":""),children:e},t)}))}):Object(r.jsx)("h5",{children:"No tags..."}):Object(r.jsx)(f,{})}}]),a}(n.Component),V=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={activeFeed:"global",activeTag:""},e.handleFeedClick=function(t){t!==e.state.activeTag&&e.setState({activeFeed:t,activeTag:""})},e.handleTagClick=function(t){e.setState({activeTag:t,activeFeed:t})},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.activeFeed,n=t.activeTag;return Object(r.jsxs)("main",{className:"home-page",children:[Object(r.jsx)("section",{className:"banner",children:Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)("h1",{className:"logo-font",children:"conduit"}),Object(r.jsx)("p",{children:"A place to share your knowledge."})]})}),Object(r.jsx)("section",{className:"container page",children:Object(r.jsxs)("div",{className:"row",children:[Object(r.jsxs)("div",{className:"col-md-9",children:[Object(r.jsx)("div",{className:"feed-toggle",children:Object(r.jsxs)("ul",{className:"nav nav-pills outline-active",children:[Object(r.jsx)("li",{onClick:function(){return e.handleFeedClick("global")},className:"nav-item nav-link ".concat("global"===a?"active":""),children:"Global Feed"}),n?Object(r.jsxs)("li",{onClick:function(){return e.handleFeedClick(n)},className:"nav-item nav-link ".concat(a===n?"active":""),children:["#",n]}):""]})}),Object(r.jsx)(G,{activeFeed:a,activeTag:n})]}),Object(r.jsx)("div",{className:"col-md-3",children:Object(r.jsxs)("div",{className:"sidebar",children:[Object(r.jsx)("p",{children:"Popular Tags"}),Object(r.jsx)(X,{handleTagClick:this.handleTagClick,activeTag:n})]})})]})})]})}}]),a}(n.Component),W=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={activeFeed:"global",activeTag:""},e.handleFeedClick=function(t){t!==e.state.activeTag&&e.setState({activeFeed:t,activeTag:""})},e.handleTagClick=function(t){e.setState({activeTag:t,activeFeed:t})},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.activeFeed,n=t.activeTag;return Object(r.jsx)("main",{className:"home-page",children:Object(r.jsx)("section",{className:"container page",children:Object(r.jsxs)("div",{className:"row",children:[Object(r.jsxs)("div",{className:"col-md-9",children:[Object(r.jsx)("div",{className:"feed-toggle",children:Object(r.jsxs)("ul",{className:"nav nav-pills outline-active",children:[Object(r.jsx)("li",{onClick:function(){return e.handleFeedClick("personal")},className:"nav-item nav-link ".concat("personal"===a?"active":""),children:"Your Feed"}),Object(r.jsx)("li",{onClick:function(){return e.handleFeedClick("global")},className:"nav-item nav-link ".concat("global"===a?"active":""),children:"Global Feed"}),n?Object(r.jsxs)("li",{onClick:function(){return e.handleFeedClick(n)},className:"nav-item nav-link ".concat(a===n?"active":""),children:["#",n]}):""]})}),Object(r.jsx)(G,{activeFeed:a,activeTag:n})]}),Object(r.jsx)("div",{className:"col-md-3",children:Object(r.jsxs)("div",{className:"sidebar",children:[Object(r.jsx)("p",{children:"Popular Tags"}),Object(r.jsx)(X,{handleTagClick:this.handleTagClick,activeTag:n})]})})]})})})}}]),a}(n.Component);function Z(){return Object(r.jsxs)("ul",{className:"nav navbar-nav pull-xs-right",children:[Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)(x.c,{className:"nav-link",activeClassName:"active",to:"/",exact:!0,children:"Home"})}),Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)(x.c,{className:"nav-link",activeClassName:"active",to:"/login",children:"Sign In"})}),Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)(x.c,{className:"nav-link",activeClassName:"active",to:"/register",children:"Sign Up"})})]})}function H(e){return Object(r.jsxs)("ul",{className:"nav navbar-nav pull-xs-right",children:[Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsx)(x.c,{className:"nav-link",activeClassName:"active",to:"/",exact:!0,children:"Home"})}),Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsxs)(x.c,{className:"nav-link",to:"/editor",children:[Object(r.jsx)("span",{className:"ion-compose",children:"\ud83d\udcdd"}),"\xa0New Post"]})}),Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsxs)(x.c,{className:"nav-link",to:"/settings",children:[Object(r.jsx)("span",{className:"ion-compose",children:"\u2699\ufe0f"}),"\xa0Settings"]})}),Object(r.jsx)("li",{className:"nav-item",children:Object(r.jsxs)(x.c,{className:"nav-link",to:"/profiles/".concat(e.user.username),children:[Object(r.jsx)("img",{src:e.user.image||"http://i.imgur.com/Xzm3mI0.jpg",className:"user-pic",alt:"user avatar"}),e.user.username]})})]})}var $=function(e){return Object(r.jsx)("nav",{className:"navbar navbar-light",children:Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)(x.b,{className:"navbar-brand",to:"/",children:"conduit"}),Object(r.jsx)("nav",{children:e.isLoggedIn?Object(r.jsx)(H,{user:e.user}):Object(r.jsx)(Z,{})})]})})};var _=function(){return Object(r.jsx)("footer",{children:Object(r.jsxs)("div",{className:"container",children:[Object(r.jsx)("a",{href:"/",className:"logo-font",children:"conduit"}),Object(r.jsxs)("span",{className:"attribution",children:["An interactive learning project from"," ",Object(r.jsx)("a",{href:"https://thinkster.io",children:"Thinkster"}),". Code & design licensed under MIT."]})]})})},K=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={username:"",email:"",password:"",errors:{username:"",email:"",password:""},requestError:"",validationError:"",isRegistering:!1},e.handleSubmit=function(t){t.preventDefault(),e.setState({isRegistering:!0});var a=e.state,r={username:a.username,email:a.email,password:a.password},n=e.state.errors;if(!n.username&&!n.email&&!n.password){var s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:r})};fetch(S,s).then((function(e){if(422!==e.status&&!e.ok)throw new Error(e.statusText);return e.json()})).then((function(t){if(t.errors){var a=t.errors.body[0];e.setState({validationError:a.includes("email")?"Email is already exist":"Username is already exist"})}else e.props.updateUser(t.user),e.props.history.push("/");e.setState({isRegistering:!1})})).catch((function(t){e.setState({requestError:"Not able to login",isRegistering:!1})}))}},e.handleChange=function(t){var a,r=t.target,n=r.name,s=r.value,c=e.state.errors;Q(s,n,c),e.setState((a={},Object(b.a)(a,n,s),Object(b.a)(a,"errors",c),a))},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state,t=e.username,a=e.email,n=e.password,s=e.errors,c=e.validationError,i=e.requestError,o=e.isRegistering;return Object(r.jsx)("div",{className:"auth-page",children:Object(r.jsx)("div",{className:"container page",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("div",{className:"col-md-6 offset-md-3 col-xs-12",children:[Object(r.jsx)("h1",{className:"text-xs-center",children:"Sign up"}),Object(r.jsx)("p",{className:"text-xs-center",children:Object(r.jsx)(x.b,{to:"/login",children:"Have an account?"})}),Object(r.jsx)("p",{className:"server-error",children:c}),Object(r.jsx)("p",{className:"server-error",children:i}),Object(r.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(r.jsxs)("fieldset",{className:"form-group",children:[Object(r.jsx)("input",{onChange:this.handleChange,name:"username",value:t,className:"form-control form-control-lg ".concat(s.username&&"error"),type:"text",placeholder:"Username",required:!0}),s.username?Object(r.jsx)("span",{className:"error-msg",children:s.username}):""]}),Object(r.jsxs)("fieldset",{className:"form-group",children:[Object(r.jsx)("input",{onChange:this.handleChange,name:"email",value:a,className:"form-control form-control-lg ".concat(s.email&&"error"),type:"email",placeholder:"Email",required:!0}),s.email?Object(r.jsx)("span",{className:"error-msg",children:s.email}):""]}),Object(r.jsxs)("fieldset",{className:"form-group",children:[Object(r.jsx)("input",{onChange:this.handleChange,name:"password",value:n,className:"form-control form-control-lg ".concat(s.password&&"error"),type:"password",placeholder:"Password",required:!0}),s.password?Object(r.jsx)("span",{className:"error-msg",children:s.password}):""]}),Object(r.jsx)("button",{type:"submit",className:"btn btn-lg btn-primary pull-xs-right",children:o?Object(r.jsx)(L,{}):"Sign up"})]})]})})})})}}]),a}(n.Component);function Q(e,t,a){switch(t){case"username":a.username=e.length?function(e){return e.length>=6}(e)?"":"Username must be atleast 6 characters":"Username is required";break;case"email":a.email=e.length?/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?"":"Email is invalid":"Email is required";break;case"password":a.password=e.length?/^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$/.test(r=e)&&r.length>=6?"":"Password must contain a letter, a number and atleast 6 characters":"Password is required"}var r}var ee=Object(m.f)(K),te=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={email:"",password:"",errors:{email:"",password:""},requestError:"",validationError:"",isLogging:!1},e.handleSubmit=function(t){t.preventDefault(),e.setState({isLogging:!0});var a=e.state,r={email:a.email,password:a.password},n=e.state.errors;if(!n.email&&!n.password){var s={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user:r})};fetch(w,s).then((function(e){if(422!==e.status&&!e.ok)throw new Error(e.statusText);return e.json()})).then((function(t){t.errors?e.setState({validationError:t.errors.body[0]}):(e.props.updateUser(t.user),e.props.history.push("/")),e.setState({isLogging:!1})})).catch((function(t){e.setState({requestError:"Not able to login",isLogging:!1})}))}},e.handleChange=function(t){var a,r=t.target,n=r.name,s=r.value,c=e.state.errors;Q(s,n,c),e.setState((a={},Object(b.a)(a,n,s),Object(b.a)(a,"errors",c),a))},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.errors,s=e.validationError,c=e.requestError,i=e.isLogging;return Object(r.jsx)("div",{className:"auth-page",children:Object(r.jsx)("div",{className:"container page",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("div",{className:"col-md-6 offset-md-3 col-xs-12",children:[Object(r.jsx)("h1",{className:"text-xs-center",children:"Sign in"}),Object(r.jsx)("p",{className:"text-xs-center",children:Object(r.jsx)(x.b,{to:"/register",children:"Need an account?"})}),Object(r.jsx)("p",{className:"server-error",children:s}),Object(r.jsx)("p",{className:"server-error",children:c}),Object(r.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(r.jsxs)("fieldset",{className:"form-group",children:[Object(r.jsx)("input",{onChange:this.handleChange,name:"email",value:t,className:"form-control form-control-lg ".concat(n.email&&"error"),type:"text",placeholder:"Email",required:!0}),n.email?Object(r.jsx)("span",{className:"error-msg",children:n.email}):""]}),Object(r.jsxs)("fieldset",{className:"form-group",children:[Object(r.jsx)("input",{onChange:this.handleChange,name:"password",value:a,className:"form-control form-control-lg ".concat(n.password&&"error"),type:"password",placeholder:"Password",required:!0}),n.password?Object(r.jsx)("span",{className:"error-msg",children:n.password}):""]}),Object(r.jsx)("button",{className:"btn btn-lg btn-primary pull-xs-right",children:i?Object(r.jsx)(L,{}):"Sign in"})]})]})})})})}}]),a}(n.Component),ae=Object(m.f)(te),re=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={title:"",description:"",body:"",tagList:[],errors:{description:"",body:"",title:"",tagList:""},tagInput:"",isCreating:!1,requestError:""},e.handleSubmit=function(t){t.preventDefault(),e.setState({isCreating:!0});var a=e.state,r={title:a.title,description:a.description,body:a.body,tagList:a.tagList},n=e.state.errors;if(!n.title&&!n.description&&!n.body&&!n.tagList){var s={method:"POST",headers:{"Content-Type":"application/json",authorization:localStorage.getItem(E)},body:JSON.stringify({article:r})};fetch(C,s).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){var a=t.article;e.setState({isCreating:!1}),e.props.history.push("/articles/".concat(a.slug))})).catch((function(){e.setState({requestError:"Not able to create the article",isCreating:!1})}))}},e.handleChange=function(t){var a=t.target,r=a.name,n=a.value,s=e.state.errors,c=[];"tagInput"===r&&n.includes(",")&&(c=n.trim().split(",").map((function(e){return e.trim()})).filter((function(e){return""!==e})),n=""),ne(n,r,s),e.setState((function(e){var t,a=e.tagList;return t={},Object(b.a)(t,r,n),Object(b.a)(t,"tagList",a.concat(c)),Object(b.a)(t,"errors",s),t}))},e.handleTagCancel=function(t){var a=e.state.tagList;a=a.filter((function(e){return e!==t})),e.setState({tagList:a})},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.description,s=t.body,c=t.tagList,i=t.errors,o=t.tagInput,l=t.isCreating,u=t.requestError;return Object(r.jsx)("div",{className:"editor-page",children:Object(r.jsx)("div",{className:"container page",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-md-10 offset-md-1 col-xs-12",children:Object(r.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(r.jsx)("p",{className:"server-error",children:u}),Object(r.jsxs)("fieldset",{className:"form-group",children:[Object(r.jsx)("input",{onChange:this.handleChange,name:"title",value:a,className:"form-control form-control-lg",type:"text",placeholder:"Article Title",required:!0}),i.title?Object(r.jsx)("span",{className:"error-msg",children:i.title}):""]}),Object(r.jsxs)("fieldset",{className:"form-group",children:[Object(r.jsx)("textarea",{onChange:this.handleChange,name:"description",value:n,className:"form-control",rows:"4",placeholder:"Write a description",required:!0}),i.description?Object(r.jsx)("span",{className:"error-msg",children:i.description}):""]}),Object(r.jsxs)("fieldset",{className:"form-group",children:[Object(r.jsx)("textarea",{onChange:this.handleChange,name:"body",value:s,className:"form-control",rows:"10",placeholder:"Write your post (in markdown)",required:!0}),i.body?Object(r.jsx)("span",{className:"error-msg",children:i.body}):""]}),Object(r.jsxs)("fieldset",{className:"form-group",children:[Object(r.jsx)("input",{onChange:this.handleChange,name:"tagInput",value:o,className:"form-control",type:"text",placeholder:"Enter comma ' , ' after typing a tag"}),i.tagList?Object(r.jsx)("span",{className:"error-msg",children:i.tagList}):"",Object(r.jsx)("ul",{className:"tag-list",children:c.map((function(t,a){return Object(r.jsxs)("li",{className:"tag-default tag-pill",children:[Object(r.jsx)("span",{onClick:function(){return e.handleTagCancel(t)},className:"close-round",children:"x"})," ",t]},a)}))})]}),Object(r.jsx)("button",{className:"btn btn-lg btn-primary pull-xs-right",children:l?Object(r.jsx)(L,{}):"Create Post"})]})})})})})}}]),a}(n.Component);function ne(e,t,a){switch(t){case"title":a.title=e.length?"":"Title is required";break;case"description":a.description=e.length?e.length<10?"Description must have atleast 10 character":"":"Description is required";break;case"body":a.body=e.length?e.length<20?"Body must have atleast 20 character":"":"Body is required"}}var se=Object(m.f)(re),ce=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={updateRequestError:"",username:"",email:"",password:"",bio:"",image:"",errors:{username:"",email:"",password:""},isUpdating:!1},e.handleSubmit=function(t){t.preventDefault(),e.setState({isUpdating:!0});var a=e.state,r=a.username,n=a.email,s=a.bio,c=a.image,i=a.password,u={username:r,email:n,bio:s,image:c};i&&(u.password=i);var d=e.state.errors;if(!d.username&&!d.email&&!d.password){var h={method:"PUT",headers:{"Content-Type":"application/json",authorization:localStorage.getItem(E)},body:JSON.stringify({user:u})};fetch(F,h).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){var a=t.user;e.props.updateUser(a),e.setState({isUpdating:!1}),e.props.history.push("/profiles/".concat(a.username))})).catch((function(t){e.setState({updateRequestError:"Not able to update current user",isUpdating:!1})}))}},e.handleChange=function(t){var a,r=t.target,n=r.name,s=r.value,c=e.state.errors;"password"!==n||s.length||(c.password=""),("password"===n&&s.length||"username"===n||"email"===n)&&Q(s,n,c),e.setState((a={},Object(b.a)(a,n,s),Object(b.a)(a,"errors",c),a))},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.setState(Object(y.a)({},this.props.user))}},{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.email,s=t.password,c=t.bio,i=t.image,o=t.errors,l=t.isUpdating,u=t.updateRequestError;return Object(r.jsx)("div",{className:"settings-page",children:Object(r.jsx)("div",{className:"container page",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsxs)("div",{className:"col-md-6 offset-md-3 col-xs-12",children:[Object(r.jsx)("h1",{className:"text-xs-center",children:"Your Settings"}),Object(r.jsx)("p",{className:"server-error",children:u}),Object(r.jsx)("form",{onSubmit:this.handleSubmit,children:Object(r.jsxs)("fieldset",{children:[Object(r.jsx)("fieldset",{className:"form-group",children:Object(r.jsx)("input",{value:i,name:"image",onChange:this.handleChange,className:"form-control",type:"text",placeholder:"URL of profile picture"})}),Object(r.jsxs)("fieldset",{className:"form-group",children:[Object(r.jsx)("input",{value:a,name:"username",onChange:this.handleChange,className:"form-control form-control-lg",type:"text",placeholder:"Username",required:!0}),o.username?Object(r.jsx)("span",{className:"error-msg",children:o.username}):""]}),Object(r.jsx)("fieldset",{className:"form-group",children:Object(r.jsx)("textarea",{value:c,name:"bio",onChange:this.handleChange,className:"form-control form-control-lg",rows:"8",placeholder:"Short bio about you"})}),Object(r.jsxs)("fieldset",{className:"form-group",children:[Object(r.jsx)("input",{value:n,name:"email",onChange:this.handleChange,className:"form-control form-control-lg",type:"email",placeholder:"Email",required:!0}),o.email?Object(r.jsx)("span",{className:"error-msg",children:o.email}):""]}),Object(r.jsxs)("fieldset",{className:"form-group",children:[Object(r.jsx)("input",{value:s,name:"password",onChange:this.handleChange,className:"form-control form-control-lg",type:"password",placeholder:"New Password"}),o.password?Object(r.jsx)("span",{className:"error-msg",children:o.password}):""]}),Object(r.jsx)("button",{className:"btn btn-lg btn-primary pull-xs-right",children:l?Object(r.jsx)(L,{}):"Update Settings"})]})}),Object(r.jsx)("hr",{}),Object(r.jsx)("button",{onClick:function(){e.props.deleteUser(),e.props.history.push("/")},className:"btn btn-outline-danger",children:"Or click here to logout."})]})})})})}}]),a}(n.Component),ie=Object(m.f)(ce);a(153);function oe(){return Object(r.jsxs)("div",{className:"ripple-loader",children:[Object(r.jsx)("div",{}),Object(r.jsx)("div",{})]})}function le(){return Object(r.jsx)("center",{children:Object(r.jsx)("h1",{children:"404 Page Not Found"})})}var ue=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={title:"",description:"",body:"",tagList:[],article:null,errors:{description:"",body:"",title:"",tagList:""},isUpdating:!1,tagInput:"",requestError:""},e.handleSubmit=function(t){t.preventDefault(),e.setState({isUpdating:!0});var a=e.state,r={title:a.title,description:a.description,body:a.body,tagList:a.tagList},n=e.state.errors,s=e.props.match.params.slug;if(!n.title&&!n.description&&!n.body&&!n.tagList){var c={method:"PUT",headers:{"Content-Type":"application/json",authorization:localStorage.getItem(E)},body:JSON.stringify({article:r})};fetch("".concat(C,"/").concat(s),c).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){var a=t.article;e.setState({isUpdating:!1}),e.props.history.push("/articles/".concat(a.slug))})).catch((function(){e.setState({requestError:"Not able to update the article",isUpdating:!1})}))}},e.handleChange=function(t){var a=t.target,r=a.name,n=a.value,s=e.state.errors,c=[];"tagInput"===r&&n.includes(",")&&(c=n.trim().split(",").map((function(e){return e.trim()})).filter((function(e){return""!==e})),n=""),de(n,r,s),e.setState((function(e){var t,a=e.tagList;return t={},Object(b.a)(t,r,n),Object(b.a)(t,"tagList",a.concat(c)),Object(b.a)(t,"errors",s),t}))},e.handleTagCancel=function(t){var a=e.state.tagList;a=a.filter((function(e){return e!==t})),e.setState({tagList:a})},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.slug,a={method:"GET",headers:{"Content-Type":"application/json",authorization:localStorage.getItem(E)}};fetch("".concat(C,"/").concat(t),a).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json()})).then((function(t){var a=t.article;e.setState(Object(y.a)(Object(y.a)({},a),{},{article:a}))})).catch((function(){e.setState({error:"Not able to fetch the article"})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.title,n=t.description,s=t.body,c=t.tagList,i=t.article,o=t.errors,l=t.isUpdating,u=t.tagInput,d=t.requestError;return i?Object(r.jsx)("div",{className:"editor-page",children:Object(r.jsx)("div",{className:"container page",children:Object(r.jsx)("div",{className:"row",children:Object(r.jsx)("div",{className:"col-md-10 offset-md-1 col-xs-12",children:Object(r.jsxs)("form",{onSubmit:this.handleSubmit,children:[Object(r.jsx)("p",{className:"server-error",children:d}),Object(r.jsxs)("fieldset",{className:"form-group",children:[Object(r.jsx)("input",{onChange:this.handleChange,name:"title",value:a,className:"form-control form-control-lg",type:"text",placeholder:"Article Title",required:!0}),o.title?Object(r.jsx)("span",{className:"error-msg",children:o.title}):""]}),Object(r.jsxs)("fieldset",{className:"form-group",children:[Object(r.jsx)("textarea",{onChange:this.handleChange,name:"description",value:n,className:"form-control",rows:"4",placeholder:"Write a description",required:!0}),o.description?Object(r.jsx)("span",{className:"error-msg",children:o.description}):""]}),Object(r.jsxs)("fieldset",{className:"form-group",children:[Object(r.jsx)("textarea",{onChange:this.handleChange,name:"body",value:s,className:"form-control",rows:"10",placeholder:"Write your post (in markdown)",required:!0}),o.body?Object(r.jsx)("span",{className:"error-msg",children:o.body}):""]}),Object(r.jsxs)("fieldset",{className:"form-group",children:[Object(r.jsx)("input",{onChange:this.handleChange,name:"tagInput",value:u,className:"form-control",type:"text",placeholder:"Enter comma ' , ' after typing a tag"}),o.tagList?Object(r.jsx)("span",{className:"error-msg",children:o.tagList}):"",Object(r.jsx)("ul",{className:"tag-list",children:c.map((function(t,a){return Object(r.jsxs)("li",{className:"tag-default tag-pill",children:[Object(r.jsx)("span",{onClick:function(){return e.handleTagCancel(t)},className:"close-round",children:"x"})," ",t]},a)}))})]}),Object(r.jsx)("button",{className:"btn btn-lg btn-primary pull-xs-right",children:l?Object(r.jsx)(L,{}):"Update Post"})]})})})})}):Object(r.jsx)(f,{})}}]),a}(n.Component);function de(e,t,a){switch(t){case"title":a.title=e.length?"":"Title is required";break;case"description":a.description=e.length?e.length<10?"Description must have atleast 10 character":"":"Description is required";break;case"body":a.body=e.length?e.length<20?"Body must have atleast 20 character":"":"Body is required"}}var he=Object(m.f)(ue);function je(e){return Object(r.jsxs)(m.c,{children:[Object(r.jsx)(m.a,{path:"/",exact:!0,children:Object(r.jsx)(W,{})}),Object(r.jsx)(m.a,{path:"/editor",exact:!0,children:Object(r.jsx)(se,{})}),Object(r.jsx)(m.a,{path:"/settings",children:Object(r.jsx)(ie,{user:e.user,updateUser:e.updateUser,deleteUser:e.deleteUser})}),Object(r.jsx)(m.a,{path:"/profiles/:username",children:Object(r.jsx)(M,{user:e.user})}),Object(r.jsx)(m.a,{path:"/articles/:slug",children:Object(r.jsx)(J,{user:e.user})}),Object(r.jsx)(m.a,{path:"/editor/:slug",children:Object(r.jsx)(he,{})}),Object(r.jsx)(m.a,{path:"*",children:Object(r.jsx)(le,{})})]})}function me(e){return Object(r.jsxs)(m.c,{children:[Object(r.jsx)(m.a,{path:"/",exact:!0,children:Object(r.jsx)(V,{})}),Object(r.jsx)(m.a,{path:"/login",children:Object(r.jsx)(ae,{updateUser:e.updateUser})}),Object(r.jsx)(m.a,{path:"/register",children:Object(r.jsx)(ee,{updateUser:e.updateUser})}),Object(r.jsx)(m.a,{path:"/profiles/:username",children:Object(r.jsx)(M,{user:e.user})}),Object(r.jsx)(m.a,{path:"/articles/:slug",component:J}),Object(r.jsx)(m.a,{path:"*",children:Object(r.jsx)(le,{})})]})}var pe=function(e){Object(h.a)(a,e);var t=Object(j.a)(a);function a(){var e;Object(u.a)(this,a);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={isLoggedIn:!1,user:null,isVerifying:!0},e.updateUser=function(t){e.setState({isLoggedIn:!0,user:t,isVerifying:!1}),localStorage.setItem(E,t.token)},e.deleteUser=function(){e.setState({isLoggedIn:!1,user:null}),localStorage.setItem(E,"")},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(localStorage.getItem(E)){var t={method:"GET",headers:{authorization:localStorage.getItem(E)}};fetch(F,t).then(function(){var e=Object(l.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=8;break}return e.next=3,t.json();case 3:return a=e.sent,r=a.errors,e.next=7,Promise.reject(r);case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.json());case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(t){var a=t.user;e.updateUser(a)})).catch((function(t){console.log(t),e.setState({isVerifying:!1})}))}else this.setState({isVerifying:!1})}},{key:"render",value:function(){var e=this.state,t=e.isLoggedIn,a=e.user;return e.isVerifying?Object(r.jsx)(oe,{}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)($,{isLoggedIn:t,user:a}),t?Object(r.jsx)(je,{user:a,updateUser:this.updateUser,deleteUser:this.deleteUser}):Object(r.jsx)(me,{updateUser:this.updateUser}),Object(r.jsx)(_,{})]})}}]),a}(n.Component);c.a.render(Object(r.jsx)(x.a,{children:Object(r.jsx)(pe,{})}),document.getElementById("root"))},65:function(e,t,a){},67:function(e,t,a){},69:function(e,t,a){}},[[154,1,2]]]);
//# sourceMappingURL=main.2865435c.chunk.js.map